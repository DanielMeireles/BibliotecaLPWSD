<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="#{layoutMB.template}">
    
    <ui:define name="metadata">
        
        <ui:param name="title" value="Dashboard"/>
        
        <style type="text/css">
            
            .ui-datatable .ui-datatable-header {
                text-align: right !important;
            }
            
        </style>
        
    </ui:define>

    <ui:define name="body">
        
        <h:form>
            
            <p:focus context="@form"/>
            
            <p:commandLink onclick="exportChartInPDF()">
                Exportar Gr√°ficos para PDF
            </p:commandLink>
            
            <div class="box box-primary">
                
                <div class="box-header with-border">
                    
                    <p:barChart model="#{dashboardBean.livrosReservados}" style="width: 100%; height: 500px;" widgetVar="01"/>
                    
                </div>
                
            </div>
            
            <div class="box box-primary">
                
                <div class="box-header with-border">
                    
                    <p:barChart model="#{dashboardBean.livrosEmprestados}" style="width: 100%; height: 500px;" widgetVar="02"/>
                    
                </div>
                
            </div>
            
            <div class="box box-primary">
                
                <div class="box-header with-border">
                    
                    <p:barChart model="#{dashboardBean.livrosReservadosCategoria}" style="width: 100%; height: 500px;" widgetVar="03"/>
                    
                </div>
                
            </div>
            
            <div class="box box-primary">
                
                <div class="box-header with-border">
                    
                    <p:barChart model="#{dashboardBean.livrosEmprestadosCategoria}" style="width: 100%; height: 500px;" widgetVar="04"/>
                    
                </div>
                
            </div>
            
            <div class="box box-primary">
                
                <div class="box-header with-border">
                    
                    <p:barChart model="#{dashboardBean.livrosReservadosEmprestados}" style="width: 100%; height: 500px;" widgetVar="05"/>
                    
                </div>
                
            </div>
            
        </h:form>
        
        <h:outputScript name="js/pdfmake.min.js" />
        <h:outputScript name="js/vfs_fonts.js" />
        
        <script>
        function exportChartInPDF() {
           var docDefinition = {
              content: [
                    'Bar Chart',
                    {
                       image: $(PF('01').exportAsImage()).attr('src'),
                       width: 520
                    },
                    'Bar Chart',
                    {
                       image: $(PF('02').exportAsImage()).attr('src'),
                       width: 520
                    },
                    'Bar Chart',
                    {
                       image: $(PF('03').exportAsImage()).attr('src'),
                       width: 520
                    },
                    'Bar Chart',
                    {
                       image: $(PF('04').exportAsImage()).attr('src'),
                       width: 520
                    },
                    'Bar Chart',
                    {
                       image: $(PF('05').exportAsImage()).attr('src'),
                       width: 520
                    },
                  ]
           }
           pdfMake.createPdf(docDefinition).open();
           pdfMake.createPdf(docDefinition).download('primefaces-charts.pdf');
        }
     </script>

    </ui:define>
    
    

</ui:composition>